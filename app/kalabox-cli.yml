#
# This contains additional services needed by the cli plugin.
#

#
# Basic cli tooling.
#
# This is a small alpine linux container that contains some basic and common
# cli tools like git, rsync and bash.
#
# It shares your entire user directory in at /usr. It also uses your Pantheon
# keys and username for its git config.
#
cli:
  image: kalabox/cli:$KALABOX_IMG_VERSION
  volumes:
    - $KALABOX_ENGINE_HOME:/user
  volumes_from:
    - data
  environment:
    WEBROOT: /var/www/html
    TERM: xterm-color
    #GIT_SSH_COMMAND: ssh -o UserKnownHostsFile=/dev/null -o StrictHostKeyChecking=no -o IdentityFile=/user/.ssh/pantheon.kalabox.id_rsa
    #GIT_AUTHOR_NAME: $KALABOX_APP_PANTHEON_CONFIG_NAME
    #GIT_AUTHOR_EMAIL: $KALABOX_APP_PANTHEON_CONFIG_EMAIL
    #GIT_COMMITTER_NAME: $KALABOX_APP_PANTHEON_CONFIG_NAME
    #GIT_COMMITTER_EMAIL: $KALABOX_APP_PANTHEON_CONFIG_EMAIL
  links:
    - db:database
  working_dir: $KALABOX_CLI_WORKING_DIR
  stdin_open: true
  tty: true

#
# Basic drush tooling.
#

#
# Pantheon tooling.
#
# This contains additional Pantheon specific tooling options such as
# drush, wp-cli and terminus.
#
drush:

  # Comment this and uncomment 'build' below if you want to edit your
  # local dockerfile and build from there. This is useful for development
  image: drush/drush:$KALABOX_APP_DRUPAL_DRUSH

  # Uncomment this and comment 'image' above if you want to edit your
  # local dockerfile and build from there. This is useful for development
  #
  volumes_from:
    - data
  environment:
    TERM: xterm-color
  links:
    - db:database
  working_dir: $KALABOX_CLI_WORKING_DIR
  stdin_open: true
  tty: true
